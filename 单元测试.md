# 单元测试

开发者编写的一小段代码，用于检验被测代码的一个很小的、很明确的功能是否正确

一个单元测试是用于判断某个特定条件（或者场景）下某个特定函数的行为

##  好处

1，单元测试使工作更轻松。令设计会变好，减少花在调试上的时间 
2，提高代码质量 
3，减少bug，快速定位bug 
4，放心地修改、重构

```java
public void assertTrue(boolean condition){
    if(!condition){
        abort();
    }
}
--------------------------------------------
int a = 5;
//如果由于某种原因，当调用assertTrue()的时候，a并不等于5，上面程序将终止
assertTure(a == 5);

```

----

**断言** 是一种放在程序中的一阶逻辑    （如一个结果为真或是假的逻辑判断式）

是为了标示与验证程序开发者预期的结果

当程序运行到断言的位置时，对应的断言应该为真

若断言不为真时，程序会中止运行，并给出错误消息

---

## 单元测试内容

### 接口功能性测试

接口功能的正确性,即保证接口能够被正常调用，并输出有效数据

> 是否被顺利调用

> 参数是否符合预期

### 局部数据结构测试

保证数据结构的正确性

> 变量是否有初始值或在某场景下是否有默认值

> 变量是否溢出

### 边界条件测试

> 变量无赋值(null)
>
> 变量是数值或字符

> 主要边界：最大值，最小值，无穷大

> 溢出边界：在边界外面取值+/-1

> 临近边界：在边界值之内取值+/-1

> 字符串的边界，引用 "变量字符"的边界

> 字符串的设置，空字符串

> 字符串的应用长度测试

> 空白集合

> 目标集合的类型和应用边界

> 集合的次序

### 所有独立代码测试

保证每一句代码，所有分支都测试完成，主要包括代码覆盖率，异常处理通路测试

> 语句覆盖率：每个语句都执行到了

> 判定覆盖率：每个分支都执行到了

> 条件覆盖率：每个条件都返回布尔

> 路径覆盖率：每个路径都覆盖到了

### 异常模块测试

后续处理模块测试:是否包闭当前异常或者对异常形成消化,是否影响结果!

---

## JAVA的单元测试JUnit4

### 注解:

```java
@BeforeClass //全局只会执行一次，而且是第一个运行
@Before //在测试方法运行之前运行
@Test //测试方法
@After //在测试方法运行之后允许
@AfterClass //全局只会执行一次，而且是最后一个运行
@Ignore //忽略此方法

```

对于每一个测试，我们都应该保持独立测试

避免 当测试完一个方法后，其参数已经被系统保持或持久化下来 带来不合理影响

对于此类场景，我们的测试代码必须具备初始化和收尾的能力。也即是@Before和@After的意义所在

同理@AfterClass和BeforeClass即是为了满足测试中，那些体积非常大，但只要一次初始化的代码块!

### 断言测试与及常用断言：

