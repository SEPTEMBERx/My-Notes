# SSH SSL RSA HTTPS

## SSH

### 介绍

Secure Shell(SSH) 是由 IETF(The Internet Engineering Task Force) 制定的

建立在应用层基础上的**安全网络协议**。

是专为远程登录会话(甚至可以用Windows远程登录Linux服务器进行文件互传)和其他网络服务提供安全性的协议，可有效弥补网络中的漏洞。

通过SSH，可以把所有传输的数据进行非对称加密(RSA)，防止中间人攻击,也能够防止DNS欺骗和IP欺骗。

额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度。目前已经成为Linux系统的标准配置。

SSH只是一种协议，存在多种实现，既有商业实现，也有开源实现。

开源实现 : 客户端 openssh-client 和服务器 openssh-server

SSH服务主要提供两个服务功能：

- 一个是**远程联机**的SSH服务，
- 一个是**借助SSH协议来传输数据**的SFTP服务

### 传统网络服务程序的弊端

传统的网络服务程序，如：ftp、pop和telnet在本质上都是不安全的，因为它们在网络上用明文传送口令和数据

这些服务程序的安全验证方式也是有其弱点的， 就是很容易受到“中间人”（man-in-the-middle）这种方式的攻击。

所谓“中间人”的攻击方式， 就是“中间人”冒充真正的[服务器](https://baike.baidu.com/item/服务器)接收你传给服务器的数据，然后再冒充你把数据传给真正的服务器

### 原理

![img](C:\Users\52739\Documents\SSH原理图)

1.  服务端开启ssh服务监听22端口
2.  客户端发送联机请求(携带IP和端口)
3.  客户端服务端进行联机加密认证
4.  认证通过联机成功

### SSH的两种认证方式

1.  基于密码口令的认证

   知道服务器SSH账号 密码 服务器IP 端口 即可登录

   > 不能保证你正在连接的服务器就是你想连接的服务器。可能会有别的服务器在冒充真正的服务器，也就是受到“中间人”这种方式的攻击

2.  基于秘钥的安全认证

   | 运行SSH服务，生成密钥对                               |
   | ----------------------------------------------------- |
   | 客户端发送公钥到服务端(通过ssh-copy-id或者其他的方式) |
   | 客户端发送连接请求                                    |
   | 服务端进行对密钥的验证                                |
   | 验证成功服务端将用公钥加密质询，发送给客户端          |
   | 客户端用自己的私钥解密质询                            |
   | 客户端将解密后的质询发送给服务端                      |
   | 服务端验证质询                                        |
   | 验证通过，建立连接                                    |

> 中间人攻击无效 但是登录过程可能更长

### SSH联机加密过程原理阐述

1. SSH服务端先生成一个1024-bit的公钥
2. 客户端发送请求
3. 服务端把公钥发给客户端
4. 客户端生成256-bit的私钥，并且和服务端发过来的公钥进行整合
5. 客户端把整合的秘钥对发给服务端
6. 使用秘钥对进行联机

PS：SSH2版本中为了修补SSH1中不验证整合秘钥对的漏洞，加入了一个确认联机正确性的Diffie-Hellman机制(每次联机都会进行秘钥对的校验)

### 总结补充

1. SSH是安全加密协议，用于远程连接linux服务器
2. SSH默认端口是22，安全协议版本是SSH2，除了SSH2还有SSH1，但是1有漏洞
3. SSH服务端只要包含两个服务，一个是SSH一个是SFTP
4. Linux SSH 客户端包含ssh远程连接命令，以及远程scp命令等
5. SSH配置文件的优化很重要，可以提高服务器的安全性，也可以提高远程连接的速度

## ssl

### 介绍

SSL(Secure Sockets Layer 安全套接层),及其继任者传输层安全（Transport Layer Security，TLS）

是为网络通信提供安全及数据完整性的一种安全协议。TLS与SSL在传输层对网络连接进行加密。

是介于TCP层协议和HTTP协议之间的协议，如果用TCP/IP五层协议来考察，那SSL属于应用层，与HTTP在同一层

SSL协议与HTTP协议没任何关系，它是一个安全协议，用于对数据包（有应用层协议头）进行加密

因此，我们也可以对FTP、SMTP等协议用SSL协议加密，即FTPS、SMTPS。



## SSH SSL 对比

**相同点：**如果按五层协议来划分的话，那SSH与SSL都可以算是应用层协议，他们都使用了非对称加密，将应用层进行了加密，另外，他们其实都是比较基础的应用层协议，即它们上面还可以再放其它应用层协议，如FTP协议等。

**不同点：**SSH不需要证书，即不需要公证机构，SSH实现了主机用户名和密码的认证，这是SSH的SSH-TRANS部分完成的，而SSL没有这个功能。





# 非对称加密

**对称加密算法**在加密和解密时使用的是**同一个秘钥**；

而非**对称加密算法**需要**两个密钥**来进行加密和解密，

这两个密钥是公开密钥（public key，简称公钥）和私有密钥（private key，简称私钥）。

加密和解密不对称



对称加密以数据加密标准DES（Data Encryption Standard）算法为代表

常见的非对称加密算法有：RSA、ECC（移动设备用）、Diffie-Hellman、El Gamal、DSA（数字签名用）

### 过程

接收者拥有公钥和私钥  将公钥公示提供给发送者

发送消息者有公钥 使用公钥加密后 将信息发出 

此时通讯过程中 只有公钥 加密后的信息 可以被拦截获取 而获取后无法解密出原始信息

信息由接收者手中的私钥解密

即此过程不对称 只有接收者可以解密 

### 优点：

1.公钥加密技术与对称加密技术相比，其优势在于不需要共享通用的密钥。 
2.公钥在传递和发布过程中即使被截获，由于没有与公钥相匹配的私钥，截获的公钥对入侵者没有太大意义。 
3.密钥少便于管理，N个用户通信只需要N对密钥，网络中每个用户只需要保存自己的解密密钥。 

4.密钥分配简单，加密密钥分发给用户，而解密密钥由用户自己保留。

### 缺点 :

加密 解密 速度慢

# HTTPS

Hypertext Transfer Protocol Secure，也称为HTTP over TLS, HTTP over SSL,

其实就客户端与服务系之间的HTTP通信基于TLS或则SSL协议。

