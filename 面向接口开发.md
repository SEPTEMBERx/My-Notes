# 面向接口开发

1. 什么是接口以及它的种类有哪些；
2. 面向接口开发的好处；
3. 面向接口开发的威胁；
4. 如何进行面向接口开发；

### 一、什么是接口

这里的接口指的是API（Application Programming Interface，应用程序编程接口）

在进行后端开发时，API的形式一般是url

用户通过交互端发送网络请求到这个url即可享受服务器的服务。

### 二、接口的种类

#### 信息型接口

XMLHttpRequest（XHR） 这些请求的url地址，正是本文所说的接口

以[淘宝网](https://s.taobao.com/search?q=456&imgfile=&js=1&stats_click=search_radio_all%3A1&initiative_id=staobaoz_20180926&ie=utf8)为例，当用户在搜索框中输入"456"后，浏览器会发送下面这个请求到淘宝服务器进行信息搜索：

> https://s.taobao.com/api?_ksTS=1537948494224_212&callback=jsonp213&ajax=true&m=customized&stats_click=search_radio_all:1&q=456&s=36&imgfile=&initiative_id=staobaoz_20180926&bcoffset=0&js=1&ie=utf8&rn=f6fe7f859aaf6ff7e63ddfb0ccc9c766

待服务器搜索完信息后，会把信息打包成 json 格式的数据返回给用户（这时的信息数据还是纯文本），然后用户就能够看到经过渲染后的页面了（这时的信息数据已经是相应位置的内容了）。*其中 json 格式是一种便于进行数据渲染的数据展现形式。*

![img](C:\Users\52739\Desktop\webp)

#### 功能型接口

以[网易云音乐](https://music.163.com/)的web端登录为例，当用户输入账号密码并点击登录后，浏览器会将相应的信息以网络请求的形式发送到服务器上专门用于登录的API接口，随后网易云音乐的服务器将会检验登录是否成功，若成功则记录用户的已登录状态，并将 JWT （Json Web Token）等信息返回给用户。
这样用户便实现的登录的目的。
![img](C:\Users\52739\Desktop\webp2)

请求的url地址

![img](C:\Users\52739\Desktop\webp3)

请求发送的数据

![img](C:\Users\52739\Desktop\webp4)

请求返回的结果

#### 资源型接口

以百度语音合成 [REST API](http://ai.baidu.com/docs#/TTS-API/top) 为例，当用户按照API接口文档的规则拼装好一个url后，访问该url即可得到百度语音合成的结果（.mp3文件）。



| 接口类型   | 返回内容                  | 应用场景           |
| ---------- | :------------------------ | ------------------ |
| 信息型接口 | 文本 / json               | 动态渲染、搜索     |
| 功能性接口 | 文本 / JWT                | 登录注册、上传文件 |
| 资源型接口 | 资源 / 图片、视频、音频等 | 加载资源文件       |

## 三、面向接口开发的好处

#### 好处一：前后端解耦

解开 页面 与 服务器 的耦合。

这种低耦合的开发模式，可使开发者们各司其职责，提升了开发产品的效率。

#### 好处二：后端程序的服务范围更广

一次开发，多端可用。

除了web端的网站外，产品的应用程序端、产品的移动端（IOS / Android）皆可通过发送网络请求到API的形式享受同样的服务。

当然如果其他类型的客户端也使用这种开发模式的话，依然可以享用第一点好处——解耦。

## 四、面向接口开发的威胁

威胁主要来自于——接口太容易被获取，

web端通过浏览器的开发者工具(F12)即可查看网络请求的发送记录，

其他形式的客户端也可以通过抓包工具等方式拦截网络请求并查看。

API请求可以轻而易举地被查看、解读。

#### 威胁一：容易被滥用，增加服务器的不必要负担

被爬虫滥用

#### 威胁二：容易被恶意攻击

倘若被一些危险的人解读了API，那些人甚至可以利用API对服务器进行攻击。

## 五、如何进行面向接口开发

#### 步骤一：设计API接口，编写后端程序

首先要能设计出能得到字符串的API（访问该API即可得到字符串），

再把字符串改成 json格式的数据字符串。

#### 步骤二：测试接口，写接口文档

自己访问自己设计的API，检查数据是否异常。

 推荐两个实用工具：

> [1. 用于接口测试的postman客户端](https://www.getpostman.com/apps)
>  [2. 用于自动生成接口文档的框架apidoc](http://apidocjs.com/)

#### 步骤三：将后端程序发布到服务器

发布到服务器后，接口就可以为更多用户服务了。